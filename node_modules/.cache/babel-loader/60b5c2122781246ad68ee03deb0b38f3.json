{"ast":null,"code":"var _jsxFileName = \"/Users/owner/Desktop/Team-up-learning_front/src/View/CourseManagementBoard/coursedashboard.js\";\nimport React, { useEffect, useState } from \"react\";\nimport \"antd/dist/antd.css\";\nimport CourseBox from \"./Components/box.js\";\nimport FriendsInvite from \"./Components/Invite.js\";\nimport API from \"../../Utils/api.js\";\nimport { Link } from \"react-router-dom\";\nimport { Modal, Button, Form, Input, DatePicker, TimePicker, Table, Tag, Space } from \"antd\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nconst {\n  RangePicker\n} = TimePicker;\n\nfunction CourseDashboard(props) {\n  const columns = [{\n    title: \"Course Name\",\n    dataIndex: \"courseName\",\n    key: \"courseName\",\n    render: text => /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 25\n      }\n    }, text)\n  }, {\n    title: \"Date\",\n    dataIndex: \"date\",\n    key: \"date\"\n  }, {\n    title: \"Time\",\n    dataIndex: \"time\",\n    key: \"time\",\n    render: time => /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 25\n      }\n    }, `${time[0]}-${time[1]}`)\n  }, {\n    title: \"Participants\",\n    key: \"participants\",\n    dataIndex: \"participants\",\n    render: participants => /*#__PURE__*/React.createElement(React.Fragment, null, participants.map(name => {\n      return /*#__PURE__*/React.createElement(Tag, {\n        color: \"geekblue\",\n        key: name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }\n      }, name);\n    }))\n  }, {\n    title: \"Action\",\n    key: \"action\",\n    dataIndex: \"courseID\",\n    render: text => /*#__PURE__*/React.createElement(Space, {\n      size: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/room/${text}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }\n    }, \" Enter Room\"))\n  }, {\n    title: \"Delete\",\n    key: \"delete\",\n    dataIndex: \"key\",\n    render: id => /*#__PURE__*/React.createElement(Space, {\n      size: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => handleDelete(id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }, \" Delete \"))\n  }];\n  const [courselist, setcourselist] = useState([]);\n  const [visible, setvisible] = useState(false);\n  const [confirmLoading, setconfirmLoading] = useState(false);\n  const [title, settitle] = useState(\"\");\n  const [date, setdate] = useState(\"\");\n  const [time, settime] = useState([]);\n  const [participants, setparticipants] = useState([]);\n\n  const refresh = () => {\n    const username = sessionStorage.getItem('username');\n    const token = sessionStorage.getItem('access_token');\n    API.get(`user/${username}`, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then(res => {\n      console.log(res.data);\n      let rows = res.data.courses.map((item, i) => {\n        return {\n          key: i,\n          courseName: item.courseName,\n          date: item.date,\n          time: item.time,\n          participants: item.participants,\n          courseID: item._id\n        };\n      });\n      setcourselist(rows);\n    });\n  };\n\n  useEffect(() => {\n    const username = sessionStorage.getItem('username');\n    const token = sessionStorage.getItem('access_token');\n    API.get(`user/${username}`, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then(res => {\n      console.log(res.data);\n      let rows = res.data.courses.map((item, i) => {\n        return {\n          key: i,\n          courseName: item.courseName,\n          date: item.date,\n          time: item.time,\n          participants: item.participants,\n          courseID: item._id\n        };\n      });\n      setcourselist(rows);\n    });\n  }, []);\n\n  const handleCancel = () => {\n    setvisible(false);\n    setdate(\"\");\n    settime([]);\n    setparticipants([]);\n    settitle(\"\");\n  };\n\n  const onTitleChange = event => {\n    settitle(event.currentTarget.value);\n  };\n\n  const onDateChange = (value, dateString) => {\n    setdate(dateString);\n  };\n\n  const onTimeChange = (value, timeString) => {\n    console.log(timeString[0] + \"-\" + timeString[1]);\n    settime(timeString);\n  };\n\n  const enterRoom = id => {\n    console.log(id);\n  };\n\n  const handleDelete = key => {\n    var dataSource = [...courselist];\n    var id = dataSource[key].courseID;\n    var username = sessionStorage.getItem('username');\n    console.log(dataSource[key].courseID);\n    setcourselist(dataSource.filter(item => item.key !== key));\n    API.delete(`course/${username}/${id}`).then(res => {\n      console.log(res.data);\n    });\n  };\n\n  const callbackFunction = childData => {\n    setparticipants([...participants, childData]);\n  };\n\n  const handleOk = () => {\n    let user = sessionStorage.getItem('username');\n    let dataToSubmit = {\n      courseName: title,\n      date: date,\n      time: time,\n      participants: participants,\n      host: user\n    };\n    console.log(dataToSubmit);\n    API.post(`course/add`, dataToSubmit).then(res => {\n      if (res.status !== 200) {\n        alert(\"submit error\");\n        return;\n      } else {\n        refresh();\n      }\n    });\n    setvisible(false);\n    setdate(\"\");\n    settime([]);\n    setparticipants([]);\n    settitle(\"\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CourseBox, {\n    box1: courselist.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"dashed\",\n    onClick: () => setvisible(true),\n    style: {\n      width: \"60%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PlusOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }), \" Add Course\"), /*#__PURE__*/React.createElement(Modal, {\n    title: \"Schedule new course\",\n    visible: visible,\n    onOk: handleOk,\n    confirmLoading: confirmLoading,\n    onCancel: handleCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    labelCol: {\n      span: 6\n    },\n    wrapperCol: {\n      span: 14\n    },\n    layout: \"horizontal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"CourseName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    onChange: onTitleChange,\n    value: title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Select Date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    onChange: onDateChange //value={this.state.date}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Select Time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(RangePicker, {\n    onChange: onTimeChange //value={this.state.time}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Invite Friends\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FriendsInvite, {\n    parentCallback: callbackFunction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"80%\",\n      margin: \"3rem auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }\n  }, \" Lecture Schedule\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    columns: columns,\n    dataSource: courselist,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 11\n    }\n  })));\n}\n\nexport default CourseDashboard;","map":{"version":3,"sources":["/Users/owner/Desktop/Team-up-learning_front/src/View/CourseManagementBoard/coursedashboard.js"],"names":["React","useEffect","useState","CourseBox","FriendsInvite","API","Link","Modal","Button","Form","Input","DatePicker","TimePicker","Table","Tag","Space","PlusOutlined","RangePicker","CourseDashboard","props","columns","title","dataIndex","key","render","text","time","participants","map","name","id","handleDelete","courselist","setcourselist","visible","setvisible","confirmLoading","setconfirmLoading","settitle","date","setdate","settime","setparticipants","refresh","username","sessionStorage","getItem","token","get","headers","then","res","console","log","data","rows","courses","item","i","courseName","courseID","_id","handleCancel","onTitleChange","event","currentTarget","value","onDateChange","dateString","onTimeChange","timeString","enterRoom","dataSource","filter","delete","callbackFunction","childData","handleOk","user","dataToSubmit","host","post","status","alert","length","width","span","margin","textAlign"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from \"react\";\nimport \"antd/dist/antd.css\";\nimport CourseBox from \"./Components/box.js\";\nimport FriendsInvite from \"./Components/Invite.js\";\nimport API from \"../../Utils/api.js\";\nimport {Link} from \"react-router-dom\";\nimport {\n  Modal,\n  Button,\n  Form,\n  Input,\n  DatePicker,\n  TimePicker,\n  Table,\n  Tag,\n  Space\n} from \"antd\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nconst { RangePicker } = TimePicker;\n\n\nfunction CourseDashboard(props){\n  const columns=[\n    {\n      title: \"Course Name\",\n      dataIndex: \"courseName\",\n      key: \"courseName\",\n      render: (text) => <p>{text}</p>\n    },\n\n    {\n      title: \"Date\",\n      dataIndex: \"date\",\n      key: \"date\"\n    },\n    {\n      title: \"Time\",\n      dataIndex: \"time\",\n      key: \"time\",\n      render: (time) => <p>{`${time[0]}-${time[1]}`}</p>\n    },\n    {\n      title: \"Participants\",\n      key: \"participants\",\n      dataIndex: \"participants\",\n      render: (participants) => (\n        <>\n          {participants.map((name) => {\n            return (\n              <Tag color={\"geekblue\"} key={name}>\n                {name}\n              </Tag>\n            );\n          })}\n        </>\n      )\n    },\n    {\n      title: \"Action\",\n      key: \"action\",\n      dataIndex: \"courseID\",\n      render: (text) => (\n        <Space size=\"middle\">\n          <Link to={`/room/${text}`}> Enter Room</Link>\n        </Space>\n      )\n    },\n    {\n      title: \"Delete\",\n      key: \"delete\",\n      dataIndex: \"key\",\n      render: (id) => (\n        <Space size=\"middle\">\n          <button onClick={()=>handleDelete(id)}> Delete </button>\n        </Space>\n      )\n    }\n\n  ];\n\n  const [courselist, setcourselist] = useState([]);\n  const [visible, setvisible] = useState(false);\n  const [confirmLoading, setconfirmLoading] = useState(false);\n  const [title, settitle] = useState(\"\");\n  const [date, setdate] = useState(\"\");\n  const [time, settime] = useState([]);\n  const [participants, setparticipants] = useState([]);\n\n  const refresh=()=>{\n    const username = sessionStorage.getItem('username');\n    const token = sessionStorage.getItem('access_token');\n    API.get(`user/${username}`,{ headers: {\"Authorization\" : `Bearer ${token}`}})\n      .then(res => {\n        console.log(res.data);\n        let rows = res.data.courses.map((item,i) => {\n           return {\n             key:i,\n             courseName:item.courseName,\n             date:item.date,\n             time:item.time,\n             participants:item.participants,\n             courseID:item._id};\n        });\n        setcourselist(rows);\n      })\n  }\n\n  useEffect(() => {\n    const username = sessionStorage.getItem('username');\n    const token = sessionStorage.getItem('access_token');\n    API.get(`user/${username}`,{ headers: {\"Authorization\" : `Bearer ${token}`}})\n      .then(res => {\n        console.log(res.data);\n        let rows = res.data.courses.map((item,i) => {\n           return {\n             key:i,\n             courseName:item.courseName,\n             date:item.date,\n             time:item.time,\n             participants:item.participants,\n             courseID:item._id};\n        });\n        setcourselist(rows);\n      })\n  },[]);\n\n  const handleCancel=()=>{\n    setvisible(false);\n    setdate(\"\");\n    settime([]);\n    setparticipants([]);\n    settitle(\"\");\n  }\n\n  const onTitleChange=(event)=>{\n    settitle(event.currentTarget.value);\n  }\n\n  const onDateChange=(value, dateString)=>{\n    setdate(dateString);\n  }\n\n  const onTimeChange=(value, timeString)=>{\n    console.log(timeString[0] + \"-\" + timeString[1]);\n    settime(timeString);\n  }\n\n\n    const enterRoom=(id)=> {\n      console.log(id);\n    };\n\n    const handleDelete=(key)=> {\n      var dataSource = [...courselist];\n      var id = dataSource[key].courseID;\n      var username = sessionStorage.getItem('username');\n      console.log(dataSource[key].courseID);\n      setcourselist(dataSource.filter(item => item.key !== key));\n      API.delete(`course/${username}/${id}`).then((res) => {\n        console.log(res.data);\n      });\n    };\n\n    const callbackFunction = (childData) => {\n      setparticipants([...participants,childData]);\n    }\n\n    const handleOk=()=>{\n      let user = sessionStorage.getItem('username');\n      let dataToSubmit = {\n        courseName: title,\n        date: date,\n        time: time,\n        participants: participants,\n        host: user\n      };\n      console.log(dataToSubmit);\n\n\n      API.post(`course/add`, dataToSubmit).then((res) => {\n        if (res.status !== 200) {\n          alert(\"submit error\");\n          return;\n        } else {\n          refresh();\n        }\n      });\n      setvisible(false);\n      setdate(\"\");\n      settime([]);\n      setparticipants([]);\n      settitle(\"\");\n    }\n\n\n\n    return(\n      <div>\n        <CourseBox box1={courselist.length}/>\n        <br />\n        <Button\n          type=\"dashed\"\n          onClick={() => setvisible(true)}\n          style={{ width: \"60%\" }}\n        >\n          <PlusOutlined /> Add Course\n        </Button>\n        <Modal\n          title=\"Schedule new course\"\n          visible={visible}\n          onOk={handleOk}\n          confirmLoading={confirmLoading}\n          onCancel={handleCancel}\n        >\n          <Form\n            labelCol={{\n              span: 6\n            }}\n            wrapperCol={{\n              span: 14\n            }}\n            layout=\"horizontal\"\n          >\n            <Form.Item label=\"CourseName\">\n              <Input onChange={onTitleChange} value={title} />\n            </Form.Item>\n            <Form.Item label=\"Select Date\">\n              <DatePicker\n                onChange={onDateChange}\n                //value={this.state.date}\n              />\n            </Form.Item>\n            <Form.Item label=\"Select Time\">\n              <RangePicker\n                onChange={onTimeChange}\n                //value={this.state.time}\n              />\n            </Form.Item>\n            <Form.Item label=\"Invite Friends\">\n              <FriendsInvite parentCallback = {callbackFunction}/>\n            </Form.Item>\n          </Form>\n        </Modal>\n        <div style={{ width: \"80%\", margin: \"3rem auto\" }}>\n          <div style={{ textAlign: \"center\" }}>\n            <h1> Lecture Schedule</h1>\n          </div>\n          <br />\n          <Table columns={columns} dataSource={courselist} />\n        </div>\n      </div>\n    );\n}\n\nexport default CourseDashboard;\n"]},"metadata":{},"sourceType":"module"}
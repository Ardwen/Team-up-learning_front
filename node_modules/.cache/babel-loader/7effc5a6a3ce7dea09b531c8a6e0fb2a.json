{"ast":null,"code":"import _toConsumableArray from\"/Users/owner/Desktop/teamapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/owner/Desktop/teamapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/owner/Desktop/teamapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/owner/Desktop/teamapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/owner/Desktop/teamapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Col,Card,Row}from\"antd\";import{TeamOutlined,DeleteOutlined}from\"@ant-design/icons\";import API from\"../../Utils/api.js\";var Meta=Card.Meta;var Mailbox=/*#__PURE__*/function(_React$Component){_inherits(Mailbox,_React$Component);var _super=_createSuper(Mailbox);function Mailbox(){var _this;_classCallCheck(this,Mailbox);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={invitations:[]};return _this;}_createClass(Mailbox,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;var user=sessionStorage.getItem('username');var token=sessionStorage.getItem('access_token');API.get(\"user/\".concat(user),{headers:{\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){console.log(res.data.mailBox);var rows=res.data.mailBox.map(function(item,i){return{key:i,_id:item._id,courseName:item.courseName,date:item.date,time:item.time,participants:item.participants,sendById:item.sentByID,courseID:item.courseID};});_this2.setState({invitations:rows});});}},{key:\"HandleDelete\",value:function HandleDelete(id,index){var _this3=this;API.delete(\"/mailBox/\".concat(id)).then(function(response){var array=_toConsumableArray(_this3.state.invitations);array.splice(index,1);_this3.setState({invitations:array});_this3.props.history.push('/dashboard');}).catch(function(err){console.log(err);});}},{key:\"HandleSubmit\",value:function HandleSubmit(id,index){var _this4=this;API.get(\"/mailBox/accept/\".concat(id)).then(function(response){var array=_toConsumableArray(_this4.state.invitations);array.splice(index,1);_this4.setState({invitations:array});_this4.props.history.push('/dashboard');}).catch(function(err){console.log(err);});}},{key:\"renderCards\",value:function renderCards(invitations){var _this5=this;invitations.map(function(Item,index){return/*#__PURE__*/React.createElement(Col,{span:6},/*#__PURE__*/React.createElement(Card,{title:\"\".concat(Item.sendById,\" invitation\"),style:{width:300},hoverable:true,actions:[/*#__PURE__*/React.createElement(TeamOutlined,{onClick:_this5.HandleSubmit(Item._id,Item.key),key:\"Join\"}),/*#__PURE__*/React.createElement(DeleteOutlined,{onClick:_this5.HandleDelete(Item._id,Item.key),key:\"Decline\"})]},/*#__PURE__*/React.createElement(\"p\",null,\"\".concat(Item.sendById,\" invites you to join the studying on course \").concat(Item.courseName,\"\\n                  The meeting will start at \").concat(Item.time[0],\"-\").concat(Item.time[1],\" on \").concat(Item.date))));});}},{key:\"render\",value:function render(){var _this6=this;return/*#__PURE__*/React.createElement(\"div\",{style:{maxWidth:\"700px\",margin:\"2rem auto\"}},/*#__PURE__*/React.createElement(\"br\",null),this.state.invitations.length===0?/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",height:\"300px\",justifyContent:\"center\",alignItems:\"center\"}},/*#__PURE__*/React.createElement(\"h2\",null,\"No post yet...\")):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,null,this.state.invitations.map(function(Item,index){return/*#__PURE__*/React.createElement(Col,{span:12},/*#__PURE__*/React.createElement(Card,{title:\"\".concat(Item.sendById,\" invitation\"),style:{width:300},hoverable:true,actions:[/*#__PURE__*/React.createElement(TeamOutlined,{onClick:function onClick(){return _this6.HandleSubmit(Item._id,Item.key);},key:\"Join\"}),/*#__PURE__*/React.createElement(DeleteOutlined,{onClick:function onClick(){return _this6.HandleDelete(Item._id,Item.key);},key:\"Decline\"})]},/*#__PURE__*/React.createElement(\"p\",null,\"\".concat(Item.sendById,\" invites you to join the studying on course \").concat(Item.courseName,\"\\n                          The meeting will start at \").concat(Item.time[0],\"-\").concat(Item.time[1],\" on \").concat(Item.date))));}))));}}]);return Mailbox;}(React.Component);export default Mailbox;","map":{"version":3,"sources":["/Users/owner/Desktop/teamapp/src/View/CourseManagementBoard/mailbox.js"],"names":["React","Col","Card","Row","TeamOutlined","DeleteOutlined","API","Meta","Mailbox","state","invitations","user","sessionStorage","getItem","token","get","headers","then","res","console","log","data","mailBox","rows","map","item","i","key","_id","courseName","date","time","participants","sendById","sentByID","courseID","setState","id","index","delete","response","array","splice","props","history","push","catch","err","Item","width","HandleSubmit","HandleDelete","maxWidth","margin","length","display","height","justifyContent","alignItems","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Col, Card, Row } from \"antd\";\nimport { TeamOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport API from \"../../Utils/api.js\";\n\nconst { Meta } = Card;\n\nclass Mailbox extends React.Component {\n  state = {\n    invitations: []\n  };\n\n  componentWillMount() {\n    let user= sessionStorage.getItem('username');\n    const token = sessionStorage.getItem('access_token');\n    API.get(`user/${user}`,{ headers: {\"Authorization\" : `Bearer ${token}`}})\n      .then(res => {\n        console.log(res.data.mailBox);\n        let rows = res.data.mailBox.map((item,i) => {\n           return {\n             key:i,\n             _id:item._id,\n             courseName:item.courseName,\n             date:item.date,\n             time:item.time,\n             participants:item.participants,\n             sendById:item.sentByID,\n             courseID:item.courseID};\n        });\n\n        this.setState({\n          invitations: rows\n        });\n      })\n  }\n\n  HandleDelete(id, index){\n    API.delete(`/mailBox/${id}`)\n      .then((response) => {\n        var array = [...this.state.invitations];\n        array.splice(index, 1);\n        this.setState({\n          invitations: array\n        });\n        this.props.history.push('/dashboard');\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  HandleSubmit(id, index){\n    API.get(`/mailBox/accept/${id}`)\n      .then((response) => {\n        var array = [...this.state.invitations];\n        array.splice(index, 1);\n        this.setState({\n          invitations: array\n        });\n        this.props.history.push('/dashboard');\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  renderCards(invitations){\n    invitations.map((Item, index) => {\n      return (\n        <Col span={6}>\n          <Card\n            title={`${Item.sendById} invitation`}\n            style={{ width: 300 }}\n            hoverable={true}\n            actions={[\n              <TeamOutlined\n              onClick={this.HandleSubmit(Item._id, Item.key)}\n               key=\"Join\" />,\n              <DeleteOutlined\n                onClick={this.HandleDelete(Item._id, Item.key)}\n                key=\"Decline\"\n              />\n            ]}\n          >\n            <p>\n              {`${Item.sendById} invites you to join the studying on course ${Item.courseName}\n                  The meeting will start at ${Item.time[0]}-${Item.time[1]} on ${Item.date}`}\n            </p>\n          </Card>\n        </Col>\n      );\n    });\n  }\n\n  render() {\n    return (\n      <div style={{ maxWidth: \"700px\", margin: \"2rem auto\" }}>\n        <br />\n        {this.state.invitations.length === 0 ? (\n          <div\n            style={{\n              display: \"flex\",\n              height: \"300px\",\n              justifyContent: \"center\",\n              alignItems: \"center\"\n            }}\n          >\n            <h2>No post yet...</h2>\n          </div>\n        ) : (\n          <div>\n            <Row>\n            {this.state.invitations.map((Item, index) => {\n              return (\n                <Col span={12}>\n                  <Card\n                    title={`${Item.sendById} invitation`}\n                    style={{ width: 300 }}\n                    hoverable={true}\n                    actions={[\n                      <TeamOutlined\n                      onClick={()=>this.HandleSubmit(Item._id, Item.key)}\n                       key=\"Join\" />,\n                      <DeleteOutlined\n                        onClick={()=>this.HandleDelete(Item._id, Item.key)}\n                        key=\"Decline\"\n                      />\n                    ]}\n                  >\n                    <p>\n                      {`${Item.sendById} invites you to join the studying on course ${Item.courseName}\n                          The meeting will start at ${Item.time[0]}-${Item.time[1]} on ${Item.date}`}\n                    </p>\n                  </Card>\n                </Col>\n              );\n            })}\n\n            </Row>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\nexport default Mailbox;\n"]},"metadata":{},"sourceType":"module"}